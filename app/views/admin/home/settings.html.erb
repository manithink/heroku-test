    <div class="breadcrum">
      <ul>
        <li><%= link_to "Home", admin_home_index_path %></li>
        <li class="greater-than"><%= image_tag "greater-than.png", width: "4", height: "7" %></li>
        <li>Settings</li>
      </ul>
    </div>
    <h3 class="clear">Settings</h3>
    <div class="inputs-details">
    <h4>Customize About Us</h4>
      <div class="row">
        <p>Description</p>
         <%= text_area_tag :about_us, "", :class => "tinymce", :id => :about_us %>
      </div>
      <div class="row">
        <input type="button" value="Publish" id = "about-us-btn" class="farCare-btn publish first-btn settings-btn" />
      </div>
      <h4>Customize Contact Us</h4>
      <div class="row">
        <p>Description</p>
        <%= text_area_tag :contact_us, "", :class => "tinymce", :id => :contact_us %>
      </div>
      <div class="row">
        <input type="button" value="Publish" id = "contact-us-btn" class="farCare-btn publish first-btn settings-btn" />
      </div>
      <h4>Customize What is HomaCare Video</h4>
      <div class="row">
        <p>Enter Youtube URL<span style="float: right;" class="error" >&nbsp;</span></p>

        <%= text_field_tag :url, @admin_data.youtube_url , :id => :url%>
      </div>
      <div class="row">
        <input type="button" value="Publish" id = "youtube-url" class="farCare-btn publish first-btn settings-btn" />
      </div>
      <h4>Customize Product Features</h4>
      <div class="row">
        <div class="upload">
          <p>Upload Image</p>
          <%= form_for @image, url: '/admin/upload_settings_images',:html => {:multipart => true} do |f| %>
              <%= f.file_field :image , id: "image_upload" %>
            <%= f.submit "Upload" ,:class => "farCare-btn upload-btn settings-btn" ,:id => "upload_button" %>
            <span style="float: right; margin-top: 2%;" class="error" >&nbsp;</span>
          <% end %>
        </div>
      </div>
      <div class="row">
        <table width="100%" cellspacing="0" cellpadding="0" class="upload-list">
          <% if @images.present? %>
            <% @images.each do |image| %>
              <tr>
                <td width="95%"><%= truncate(image.image.url.split('/')[-1], length: 100, omission: "...") %></td>
                <td align="center" width="5%">
                  <%= link_to '', "/admin/images/#{image.id}/delete", class: 'delete'  %>
                </td>
              <tr>
            <% end %>
          <% else %>
            <tr>
              <td>No Images</td>
            </tr>
          <% end %>
        </table>
      </div>
    </div>
  </div>
  <script type="text/javascript">

    $(function(){
        setTinyMCE();
    });

    $('#new_image').submit(function(){
    $('#upload_button').next('.error').empty();
      var image = $('#image_upload').val();
      if(image == '' || image == undefined){
        $('#upload_button').next('.error').append("Select an image before uploading!");
        return false;
      } else{
        if('<%= @images.count %>' == 6){
          $('#upload_button').next('.error').append("You have exceed the limit!");
          return false;
        }else {
          var ext = image.split('.').pop().toLowerCase();
          if($.inArray(ext, ['png','jpg','jpeg']) == -1) {
              $('#upload_button').next('.error').append("Invalid image extension!");
              return false;
          } else {
            var size = $('#image_upload')[0].files[0].size
            if(size >= 2000000){
              $('#upload_button').next('.error').append("File size must be 2 MB or below")
              return false;
            } else{
              return true
            }
          }
        }
      }
    });

    function setTinyMCE(){
      tinyMCE.init({
        mode : "textareas",
        plugins : "insertdatetime,preview, link",

        // Theme options - button# indicated the row# only
        theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
        theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true
      });
    }

    setTimeout(function() {
        setValue();
    }, 1000);

    function setValue(){
      tinymce.get('about_us').setContent("<%= raw @admin_data.about_us %>");
      tinymce.get('contact_us').setContent("<%= raw @admin_data.contact_us %>");
    }


    $('.delete').click(function(e){
      var link = $(this).attr('href');
      e.preventDefault();
      jConfirm('Do you really want to delete?','Confirmation', function(c){
        if(c == true){
            var self = $(this)
            window.location = link;
        }
      });
    });

    $('#about-us-btn').click(function(){
      var content = tinymce.get('about_us').getContent();
        saveSettings(content,'about_us');
    });

    $('#contact-us-btn').click(function(){
      var content = tinymce.get('contact_us').getContent();
        saveSettings(content,'contact_us');
    });

    $('#youtube-url').click(function(){
      $(this).parent().prev().find('.error').empty();
      var url = $('#url').val();
      if (url != ""){
        var matches = url.match(/(http|https):\/\/(?:www\.)?youtube.com\/watch\?v=([a-zA-Z0-9\-_]+)/);
        if (matches) {
            saveSettings(url,'url');
        } else {
            $(this).parent().prev().find('.error').append("Please Enter a valid url!");
        }
      }
      else{
        saveSettings('','url');
      }

    });

    function saveSettings(content, item){
      $.ajax({
          url: "/admin/save_settings",
          data: { content : content, item: item}
        }).done(function(data) {
          jAlert('info', data["message"], 'Notice');
      });
    }

  </script>

